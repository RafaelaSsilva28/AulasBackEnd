<%- include('../includes/header.ejs', {titulo: 'Lista de Alunos'}) %>

<main>
    <h2>Lista de Alunos</h2>
    <a href="/alunos/novo" class="btn btn-principal"> Adicionar Alunos</a>

     <!-- Criando form de pesquisa e ordenação -->
    <form action="/alunos/listar" method="GET" class="form form-consulta">
        <input type="text" name="busca" placeholder="Buscar por Nome ou Turma ">
        <select name="ordem">
            <option value="nome">Ordenar por nome</option>
            <option value="nome">Ordenar por Turma</option>
        </select>
        <button type="submit" class="btn btn-principal">Buscar</button>
    </form>

    <section class="lista-cards">
            <% for( let aluno of dadosAlunos) { %> 
                <div class="card-aluno">
                    <img src="<%= aluno.foto %>">
                    <h2><%= aluno.nome %></h2>
                    <p><%= aluno.nome_turma %></p>
                    <div class="acoes">
                    <a href="/alunos/editar/<%= aluno.id_aluno %>" class="btn btn-edit">Editar</a>
                    <form action="/alunos/excluir/<%= aluno.id_aluno %>" method="POST">
                        <button type="submit" class="btn btn-delete">Excluir</button>
                    </form>
                </div>
                </div>
                <% } %>
        </section>


    <table class="dados-table">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Idade</th>
                <th>CPF</th>
                <th>Sexo</th>
                <th>Foto</th>
                <th>Email</th>
                <th>Turma</th>
                <th>Ações</th>

                
            </tr>
        </thead>
        <tbody>
            <% for(let aluno of dadosAlunos) { %>
            <tr>
                <td><%= aluno.nome %></td>
                <td><%= aluno.idade %></td>
                <td><%= aluno.cpf %></td>
                <td><%= aluno.sexo %></td>
                <td><img src="<%= aluno.foto %>" alt="foto"></td>
                <td><%= aluno.email %></td>
                <td><%= aluno.nome_turma %></td>
                <td class="acoes">
                    <a href="/alunos/editar/<%= aluno.id_aluno %>" class="btn btn-edit">Editar</a>
                    <form action="/alunos/excluir/<%= aluno.id_aluno %>" method="POST">
                        <button type="submit" class="btn btn-delete">Excluir</button>
                    </form>
                </td>
            </tr>
            <% } %>
        </tbody>
    </table>
</main>

<%- include('../includes/footer.ejs') %>
